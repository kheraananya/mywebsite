{% extends "base.html" %}
{% block title %} Dashboard {% endblock %}
{% block content %}
<br>
{% if user.usertype == 'reporter' %}
    <div align="center">
      
        <a href="/create-ticket">
            <button type="button" class="btn btn-info lg">
                Create New Ticket
            </button>
        </a>
        
<br>
    </div>
{% endif %}


<div class = "container">
    <table class = "table" id="myTable">
        <thead class = "thead-light">
            <tr>
                <th>Ticket ID</th>        
                <th>Customer Name</th>
                <th>Created By</th>
                <th>Created on</th>
                <th>Last Modified</th>
                <th>Assignee</th>
                <th>Current Status</th>
            </tr>
        </thead>
        <tbody>
          {% for ticket in tickets %}
              <tr>
                  <td><a href="/tickets/{{ticket.id}}">{{ticket.id}}</a></td>
                  <td>{{ticket.custname}}</td>
                  <td>{{ticket.author.username}}</td>
                  <td>{{ticket.date_created}}</td>
                  <td>{{ticket.last_modified}}</td>
                  <td>{% if ticket.assignee_id %}
                        {{ticket.assignee.username}}
                      {% else %}
                        Not Assigned
                      {% endif %}
                  </td>
                  <td>{{ticket.status}}</td>
              </tr>
          {% endfor %}
         </tbody>  
    </table>
</div>
<script>
    $(document).ready( function () {
        $('#myTable').DataTable();  
        var x = document.getElementById("home");
        x.setAttribute("class","nav-item nav-link active");
  } );
</script>
<br>
{% block footer %}
    {% endblock %}
{% endblock %}

